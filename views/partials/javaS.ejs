<script>

    const bar = document.getElementById('bar');
    const nav = document.getElementById('navbarmob');
    const close = document.getElementById('close');

    if (bar){
        bar.addEventListener('click', () => {
            nav.classList.add('active');
        })
    }

    if(close){
        close.addEventListener('click', () => {
            nav.classList.remove('active');
    })
    }


   


    function addToCart(event) {
        const selectedSize = document.getElementById('dresssize').value;
        if (selectedSize ==='none') {
            event.preventDefault();
            var notification = document.getElementById("notification");
            document.getElementById('notification').innerText = 'Please select a size';
            notification.style.display = "block";
            setTimeout(() => {
            notification.style.display = "none";
            location.reload();
            }, 2000);
        } else {
            document.getElementById('selectedSize').value = selectedSize;
            fetch('/cartquantity')
            .then(response => response.json())
            .then(result => {
                // console.log(result)
                const itemCount = result.itemCount;
                const cartItemCountElement = document.getElementById("cartItemCount");
                cartItemCountElement.textContent = itemCount;
                var notification = document.getElementById("notification");
                notification.style.display = "block";

                setTimeout(() => {
                notification.style.display = "none";
                location.reload();
                }, 1000);
            })
            .catch(error => {
                console.log('Error:', error);
            });
        }
    };

  window.onload = function () {
    fetch('/cartquantity')
    .then(response => response.json())
    .then(result => {
        // console.log(result)
        const itemCount = result.itemCount;
        const cartItemCountElement = document.getElementById("cartItemCount");
        const cartItemCountElementMob = document.getElementById("cartItemCountMob");
        cartItemCountElement.textContent = itemCount;
        cartItemCountElementMob.textContent = itemCount;
    })
    .catch(error => {
        console.log('Error:', error);
    });   
  };

  const deleteButtons = document.querySelectorAll(".deleteButton");

// Add click event listener to each delete button
    deleteButtons.forEach((button) => {
    button.addEventListener("click", function() {
        const itemId = this.dataset.itemId;
        const itemQty = this.dataset.itemQty;
        const itemPrice = this.dataset.itemPrice;
        const itemSize =this.dataset.itemSize;
        console.log(itemSize);
        var totalPrice = this.dataset.totalPrice; 

        // Send a DELETE request to the server
        fetch(`/cart/${itemId}`, {
        method: "DELETE",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ size: itemSize }),
        })
        // .then(response => response.json())
        .then(data => {
        console.log("Item deleted successfully");
        location.reload();
        })
        .catch(error => {
        console.log("Error:", error);
        });
    });
    });

    function reloadPage() {
    // document.forms[0].submit();
    setTimeout(() => {
    location.reload();
    }, 300);
    }

    const searchForm = document.getElementById('searchForm');
    const searchInput = document.getElementById('searchInput');

    searchForm.addEventListener('submit', function(event) {
        event.preventDefault(); 
        const searchText = searchInput.value;
        // console.log(searchText); 
        searchForm.submit(); 
    });
</script> 